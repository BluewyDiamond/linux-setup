# [ Outputs ]
#
monitor = , highrr, auto, 1, vrr, 2

# [ Inputs ]
#
input {
   kb_layout = bluewy, bluewy, bluewy
   kb_variant = colemak_dh_wide_custom_eu_iso, gralmak_wide_custom_eu_iso, vanilla_iso
   kb_options = grp:win_space_toggle
}

device {
   name = steelseries-steelseries-rival-3
   sensitivity = -0.75
   accel_profile = flat
}

# [ Behaviours ]
#
general {
   allow_tearing = true
}

dwindle {
   preserve_split = true
   force_split = 2
}

input {
   follow_mouse = 2
   mouse_refocus = false
   float_switch_override_focus = 0

   touchpad {
      natural_scroll = true
   }
}

misc {
   key_press_enables_dpms = true
   new_window_takes_over_fullscreen = 2
   disable_hyprland_logo = true
   disable_splash_rendering = true
   force_default_wallpaper = 0
   enable_anr_dialog = false
}

ecosystem {
   enforce_permissions = true

   no_update_news = true
   no_donation_nag = true
}

cursor {
   sync_gsettings_theme = false
}

# [ Aesthetics ]
#
general {
   gaps_in = 6
   gaps_out = 12
   border_size = 4
   col.active_border = rgb(9acbfa)
   col.inactive_border = rgb(43474e)
}

group {
   col.border_active = rgb(9acbfa)
   col.border_inactive = rgb(43474e)

   groupbar {
      enabled = true
      rounding = 4
      text_color = rgb(abb2bf)
      font_size = 14
      render_titles = false
      height = 0
      indicator_height = 20

      col.active = rgb(0b4a72)
      col.inactive = rgb(43474e)

      gaps_in = 6
      gaps_out = 12
   }
}

decoration {
   rounding = 4
   rounding_power = 4.0

   shadow {
      enabled = false
   }

   blur {
      enabled = false
   }
}

misc {
   font_family = IosevkaTerm Nerd Font Mono
   background_color = rgb(111318)
}

animations {
   enabled = true

   bezier = linear, 0,0,1,1
   bezier = spring, 0.16, 1, 0.3, 1
   bezier = easeOutExpo, 0.16, 1, 0.3, 1
   bezier = easeOutQuad, 0.5, 1, 0.89, 1

   animation = global, 1, 1, linear
   animation = windowsIn, 1, 1, easeOutExpo, popin 80%
   animation = windowsOut, 1, 1, easeOutQuad, popin 80%
   animation = windowsMove, 1, 1, spring, slide
   animation = workspacesIn, 1, 1, spring, slide
   animation = workspacesOut, 1, 1, spring, slide
   animation = layersIn, 1, 1, easeOutExpo, popin 80%
   animation = layersOut, 1, 1, easeOutQuad, popin 80%
}

# [ Workspace Rules ]
#

# [ Window Rules ]
#
windowrule = idleinhibit fullscreen, class:^(.*)$

windowrule = suppressevent fullscreen, class:negative:^(librewolf$|zen$).*$
windowrule = suppressevent maximize, class:^(.*)$
windowrule = suppressevent activate, class:^(.*)$
windowrule = suppressevent activatefocus, class:^(.*)$
windowrule = suppressevent fullscreenoutput, class:^(.*)$

windowrule = renderunfocused, class:^(peak\.exe)$

windowrule = nomaxsize, class:negative:^(random_text$|random_text2$|steam).*$, title:negative:^(.*notificationtoasts.*|.*goodbye.*)$
windowrule = tile, class:negative:^(random_text$|u_get_the_idea$|steam).*$, title:negative:^(.*notificationtoasts.*|.*goodbye.*)$

# [ Permissions ]
#
permission = /usr/lib/xdg-desktop-portal-hyprland, screencopy, allow
permission = /usr/bin/wayshot, screencopy, allow
permission = /usr/bin/hyprpicker, screencopy, allow
permission = /usr/bin/hyprlock, screencopy, allow

# [ Binds ]
#
# [[ WM ]]
#
bind = SUPER, Q, killactive
bind = SUPER + SHIFT, Escape, exit

# [[ Workspace ]]
#
bind = SUPER, 1, focusworkspaceoncurrentmonitor, 1
bind = SUPER, 2, focusworkspaceoncurrentmonitor, 2
bind = SUPER, 3, focusworkspaceoncurrentmonitor, 3
bind = SUPER, 4, focusworkspaceoncurrentmonitor, 4
bind = SUPER, 8, focusworkspaceoncurrentmonitor, 8
bind = SUPER, 9, focusworkspaceoncurrentmonitor, 9
bind = SUPER, 0, focusworkspaceoncurrentmonitor, 10

bind = SUPER + CTRL, 1, movetoworkspace, 1
bind = SUPER + CTRL, 2, movetoworkspace, 2
bind = SUPER + CTRL, 3, movetoworkspace, 3
bind = SUPER + CTRL, 4, movetoworkspace, 4
bind = SUPER + CTRL, 8, movetoworkspace, 8
bind = SUPER + CTRL, 9, movetoworkspace, 9
bind = SUPER + CTRL, 0, movetoworkspace, 10

bind = SUPER + ALT, 1, togglespecialworkspace, 1
bind = SUPER + ALT, 2, togglespecialworkspace, 2
bind = SUPER + ALT, 3, togglespecialworkspace, 3
bind = SUPER + ALT, 4, togglespecialworkspace, 4
bind = SUPER + ALT, 8, togglespecialworkspace, 8
bind = SUPER + ALT, 9, togglespecialworkspace, 9
bind = SUPER + ALT, 0, togglespecialworkspace, 10

bind = SUPER + ALT + CTRL, 1, movetoworkspace, special:1
bind = SUPER + ALT + CTRL, 2, movetoworkspace, special:2
bind = SUPER + ALT + CTRL, 3, movetoworkspace, special:3
bind = SUPER + ALT + CTRL, 4, movetoworkspace, special:4
bind = SUPER + ALT + CTRL, 8, movetoworkspace, special:8
bind = SUPER + ALT + CTRL, 9, movetoworkspace, special:9
bind = SUPER + ALT + CTRL, 0, movetoworkspace, special:0

# [[ Windows ]]
#
bind = SUPER, Up, movefocus, u
bind = SUPER, Right, movefocus, r
bind = SUPER, Down, movefocus, d
bind = SUPER, Left, movefocus, l

bind = SUPER, Up, alterzorder, top
bind = SUPER, Right, alterzorder, top
bind = SUPER, Down, alterzorder, top
bind = SUPER, Left, alterzorder, top

bind = SUPER, U, movefocus, u
bind = SUPER, I, movefocus, r
bind = SUPER, E, movefocus, d
bind = SUPER, N, movefocus, l

bind = SUPER, U, alterzorder, top
bind = SUPER, I, alterzorder, top
bind = SUPER, E, alterzorder, top
bind = SUPER, N, alterzorder, top

bind = SUPER + SHIFT, Up, movewindoworgroup, u
bind = SUPER + SHIFT, Right, movewindoworgroup, r
bind = SUPER + SHIFT, Down, movewindoworgroup, d
bind = SUPER + SHIFT, Left, movewindoworgroup, l

bind = SUPER + SHIFT, U, movewindoworgroup, u
bind = SUPER + SHIFT, I, movewindoworgroup, r
bind = SUPER + SHIFT, E, movewindoworgroup, d
bind = SUPER + SHIFT, N, movewindoworgroup, l

binde = SUPER + ALT, U, resizeactive, 0 -10
binde = SUPER + ALT, I, resizeactive, 10 0
binde = SUPER + ALT, E, resizeactive, 0 10
binde = SUPER + ALT, N, resizeactive, -10 0

bindm = SUPER, mouse:272, movewindow
bindm = SUPER, mouse:273, resizewindow

bind = SUPER, V, togglefloating,
bind = SUPER + SHIFT, V, cyclenext, floating
bind = SUPER + CTRL, V, cyclenext, tiled
bind = SUPER, S, togglesplit,

bind = SUPER, M, fullscreenstate, 1 1
bind = SUPER, F, fullscreenstate, 2 2
bind = SUPER + SHIFT, F, fullscreenstate, 0, 2

bind = SUPER, G, togglegroup
bind = SUPER, period, changegroupactive
bind = SUPER, H, changegroupactive, b
bind = SUPER + SHIFT, period, movegroupwindow
bind = SUPER + SHIFT, H, movegroupwindow, b

# [[ Other ]]
#
bind = SUPER, T, exec, wezterm
bind = SUPER, D, exec, uwsm app -- fuzzel '--launch-prefix=uwsm app -- '
bind = SUPER, X, exec, uwms app -- cliphist list | fuzzel --dmenu | cliphist decode | wl-copy
bind = SUPER, B, exec, uwsm app -- $HOME/.config/hypr/land/scripts/quick_menu.fish

binde = , XF86MonBrightnessUp, exec, brightnessctl s +5%
binde = , XF86MonBrightnessDown, exec, brightnessctl s 5%-

binde = , xf86KbdBrightnessUp, exec, brightnessctl -d *::kbd_backlight set +33%
binde = , xf86KbdBrightnessDown, exec, brightnessctl -d *::kbd_backlight set 33%-

binde = , XF86AudioRaiseVolume, exec, pamixer -i 5
binde = , XF86AudioLowerVolume, exec, pamixer -d 5
bind = , XF86AudioMicMute, exec, pamixer --default-source -m
bind = , XF86AudioMute, exec, pamixer -t
bind = , XF86AudioPlay, exec, playerctl play-pause
bind = , XF86AudioPause, exec, playerctl play-pause
bind = , XF86AudioNext, exec, playerctl next
bind = , XF86AudioPrev, exec, playerctl previous

# [ Env ]
#
# managed externally (uwsm)

# [ Autostart ]
#
# [[ Rice ]]
#
exec-once = gsettings set org.gnome.desktop.interface gtk-theme one_dark_adwaita
exec-once = gsettings set org.gnome.desktop.interface icon-theme Sweet-Rainbow
exec-once = gsettings set org.gnome.desktop.interface cursor-theme Bibata-Modern-Classic
exec-once = gsettings set org.gnome.desktop.interface cursor-size 24
exec-once = gsettings set org.gnome.desktop.interface color-scheme prefer-dark

# [[ Polkit ]]
#
exec-once = nu -c "try { pidof io.elementary.desktop.agent-polkit } catch { exec uwsm app -- /usr/lib/policykit-1-pantheon/io.elementary.desktop.agent-polkit }"

# [[ Idle Listener ]]
#
exec-once = nu -c "try { pidof hypridle } catch { exec uwsm app -- hypridle }"
exec-once = nu -c "try { pidof wayland-pipewire-idle-inhibit } catch { exec uwsm app -- wayland-pipewire-idle-inhibit }"

# [[ Clipboard ]]
#
exec-once = nu -c "try { pgrep -fx 'wl-paste --type text --watch cliphist store' } catch { exec uwsm app -- wl-paste --type text --watch cliphist store }"
exec-once = nu -c "try { pgrep -fx 'wl-paste --type image --watch cliphist store'} catch { exec uwsm app -- wl-paste --type image --watch cliphist store }"

# [[ Widget ]]
#
exec-once = nu -c "exec uwsm app -- $"($env.HOME)/.config/ags/cli.nu" run"

# [[ Other ]]
#
exec-once = nu -c "try { pidof keepassxc } catch { exec uwsm app -- keepassxc }"
