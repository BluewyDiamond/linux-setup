#!/usr/bin/env nu

with-env {
   NIRI_DISABLE_SYSTEM_MANAGER_NOTIFY: 1
   UWSM_FINALIZE_VARNAMES: 'WAYLAND_DISPLAY DISPLAY NIRI_SOCKET XDG_CURRENT_DESKTOP XDG_SESSION_TYPE'

   SDL_VIDEODRIVER: 'wayland,x11'
   CLUTTER_BACKEND: 'wayland'
   QT_QPA_PLATFORM: 'wayland;xcb'

   QT_QPA_PLATFORMTHEME: 'qt6ct'

   _JAVA_AWT_WM_NONREPARENTING: '1'
} {
   exec uwsm start -- niri --session
}
